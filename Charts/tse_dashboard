{"exportVersion":6,"dashboards":{"dashboard-1":{"description":"Key metrics around sentiment analysis of support cases","embedding":{"anonymousAuthEnabled":true},"filters":[{"type":"String","disabled":false,"name":"assignee","settings":{"allOthers":true,"values":[]},"linkedFields":[{"dataSourceId":"data-source-1","fieldPath":"assignee"}]},{"type":"ObjectId","disabled":false,"name":"_id","settings":{"allOthers":false,"values":[]},"linkedFields":[{"dataSourceId":"data-source-1","fieldPath":"_id"}]}],"layout":[{"i":"item-1","w":4,"h":2,"x":3,"y":8},{"i":"item-2","w":3,"h":2,"x":0,"y":4},{"i":"item-3","w":3,"h":2,"x":0,"y":8},{"i":"item-4","w":3,"h":2,"x":0,"y":6},{"i":"item-5","w":2,"h":2,"x":0,"y":0},{"i":"item-6","w":2,"h":2,"x":2,"y":0},{"i":"item-7","w":4,"h":2,"x":0,"y":2},{"i":"item-8","w":3,"h":2,"x":3,"y":4},{"i":"item-9","w":2,"h":2,"x":4,"y":0},{"i":"item-10","w":2,"h":2,"x":4,"y":2},{"i":"item-11","w":4,"h":2,"x":3,"y":6}],"title":"TSE Dashboard"}},"items":{"item-1":{"calculatedFields":[],"channels":{"x":{"channelType":"value","inferredType":"Date","field":"dateClosed","type":"temporal"},"y":{"channelType":"value","inferredType":"Number","field":"sentimentScore","type":"quantitative"},"color":{"channelType":"category","inferredType":"String","field":"assignee","type":"nominal","isBinning":false}},"chartType":"Scatter","convertedFields":[],"customisations":{"options":{"trendline":{"enabled":false,"value":{"series":"y","type":null}}},"conditionalFormatting":[],"axes":{"y":{"scaleMax":{"enabled":true,"value":"10"},"scaleMin":{"enabled":true,"value":"0"}}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Date Closed"},"dateTimeFormatting":{"enabled":true,"value":"DD-MMM-YYYY"}},"y":{"labelOverride":{"enabled":true,"value":"Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}},"color":{"labelOverride":{"enabled":true,"value":"Assignee"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"scatter","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Ticket Sentiment by TSE","embedding":{}},"item-2":{"calculatedFields":[],"channels":{"x":{"channelType":"aggregation","inferredType":"Number","field":"sentimentScore","type":"quantitative","aggregate":"median"},"y":{"channelType":"category","inferredType":"String","field":"assignee","type":"nominal","isBinning":false}},"chartType":"Grouped Bar","convertedFields":[],"customisations":{"options":{},"conditionalFormatting":[],"axes":{"x":{}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Avg Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}},"y":{"labelOverride":{"enabled":true,"value":"Assignee"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Avg Customer Sentiment by TSE","embedding":{}},"item-3":{"calculatedFields":[],"channels":{"x":{"channelType":"aggregation","inferredType":"Number","field":"sentimentScore","type":"quantitative","aggregate":"mean"},"y":{"channelType":"category","inferredType":"String","field":"contactName","type":"nominal","isBinning":false}},"chartType":"Grouped Bar","convertedFields":[],"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#1648cc"]}},"conditionalFormatting":[],"axes":{"x":{}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Avg Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}},"y":{"labelOverride":{"enabled":true,"value":"Contact"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Avg Sentiment by Customer","embedding":{}},"item-4":{"calculatedFields":[],"channels":{"x":{"channelType":"category","inferredType":"Number","field":"timeToCloseDays","type":"nominal","isBinning":true,"quantitativeBinning":{"binSize":7}},"y":{"channelType":"aggregation","inferredType":"Number","field":"sentimentScore","type":"quantitative","aggregate":"mean"}},"chartType":"Grouped Combo","convertedFields":[],"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#e6196e"]}},"conditionalFormatting":[],"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"vertical"}},"y":{}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Time to Close (Days)"},"numberFormatting":{"enabled":true,"value":"Custom"}},"y":{"labelOverride":{"enabled":true,"value":"Avg Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"combo-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":"[\n  {\n    $addFields: {\n      timeToCloseDays: {\n        $divide: [\n          { $subtract: [\"$dateClosed\", \"$dateOpened\"] },\n          1000 * 60 * 60 * 24 // milliseconds in a day\n        ]\n      }\n    }\n  },\n  {\n    $project: {\n      _id: 0,\n      timeToCloseDays: { $round: [\"$timeToCloseDays\", 0] }, // Round to nearest day\n      sentimentScore: 1\n    }\n  }\n]","queryId":null,"reductions":{},"sample":false,"title":"Time to Close vs Avg Sentiment Score","embedding":{}},"item-5":{"calculatedFields":[],"channels":{"value":{"channelType":"aggregation","inferredType":"String","field":"_id","type":"quantitative","aggregate":"count"}},"chartType":"Number","convertedFields":[],"customisations":{"options":{},"conditionalFormatting":[],"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Total Tickets Closed","embedding":{}},"item-6":{"calculatedFields":[],"channels":{"value":{"channelType":"aggregation","inferredType":"Number","field":"sentimentScore","type":"quantitative","aggregate":"mean"}},"chartType":"Number","convertedFields":[],"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Average Sentiment Score","embedding":{}},"item-7":{"calculatedFields":[],"channels":{"group":{"channelType":"category","inferredType":"String","field":"assignee","type":"nominal","isBinning":false},"value":{"channelType":"aggregation","inferredType":"Number","field":"totalTicketCount","type":"quantitative","aggregate":"sum"},"value_series_0":{"channelType":"aggregation","inferredType":"Number","field":"averageTimeToClose","type":"quantitative","aggregate":"mean"},"value_series_1":{"channelType":"aggregation","inferredType":"Number","field":"averageSentiment","type":"quantitative","aggregate":"mean"}},"chartType":"Data Table","convertedFields":[],"customisations":{"options":{"totalsColumn":{"enabled":false,"value":null}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"type":"CHANNEL","value":"value_series_0"},"operator":"NUMBER_GREATER_THAN","value":"7"}],"applyToEntireRow":false,"styling":{"color":"rgb(240, 158, 117)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"type":"CHANNEL","value":"value_series_0"},"operator":"NUMBER_LESS_THAN_OR_EQUAL_TO","value":"7"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"type":"CHANNEL","value":"value_series_1"},"operator":"NUMBER_LESS_THAN","value":"4"}],"applyToEntireRow":false,"styling":{"color":"rgb(230, 93, 25)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"type":"CHANNEL","value":"value_series_1"},"operator":"NUMBER_LESS_THAN_OR_EQUAL_TO","value":"6"},{"target":{"type":"CHANNEL","value":"value_series_1"},"operator":"NUMBER_GREATER_THAN","value":"4"}],"applyToEntireRow":false,"styling":{"color":"rgb(240, 158, 117)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"type":"CHANNEL","value":"value_series_1"},"operator":"NUMBER_GREATER_THAN_OR_EQUAL_TO","value":"6"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}],"axes":{},"channels":{"group":{},"value":{"labelOverride":{"enabled":true,"value":"Tickets Closed"},"numberFormatting":{"enabled":true,"value":"Default"}},"value_series_0":{"labelOverride":{"enabled":true,"value":"Avg Days to Close"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"1"}},"value_series_1":{"labelOverride":{"enabled":true,"value":"Avg Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"1"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{"sortModel":[{"colId":"value_series_1","sort":"desc"}]},"missedFields":[],"query":"[\n  {\n    $addFields: {\n      timeToClose: {\n        $divide: [\n          { $subtract: [\"$dateClosed\", \"$dateOpened\"] },\n          1000 * 60 * 60 * 24 // converting milliseconds to days\n        ]\n      }\n    }\n  },\n  {\n    $group: {\n      _id: \"$assignee\",\n      totalTicketCount: { $sum: 1 },\n      averageSentiment: { $avg: \"$sentimentScore\" },\n      averageTimeToClose: { $avg: \"$timeToClose\" }\n    }\n  },\n  {\n    $project: {\n      _id: 0,\n      assignee: \"$_id\",\n      totalTicketCount: 1,\n      averageSentiment: { $round: [\"$averageSentiment\", 2] }, // rounding to 2 decimal places\n      averageTimeToClose: { $round: [\"$averageTimeToClose\", 2] } // rounding to 2 decimal places\n    }\n  }\n]","queryId":null,"reductions":{},"sample":false,"title":"TSE Performance Summary","embedding":{}},"item-8":{"calculatedFields":[],"channels":{"x":{"channelType":"aggregation","inferredType":"Number","field":"sentimentScore","type":"quantitative","aggregate":"mean"},"y":{"channelType":"category","inferredType":"String","field":"productCategory","type":"nominal","isBinning":false}},"chartType":"Grouped Bar","convertedFields":[],"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#e6b219"]}},"conditionalFormatting":[],"axes":{"x":{}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Avg Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}},"y":{"labelOverride":{"enabled":true,"value":"Component"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"bar-grouped","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Avg Sentiment by Product","embedding":{}},"item-9":{"calculatedFields":[],"channels":{"value":{"channelType":"aggregation","inferredType":"String","field":"_id","type":"quantitative","aggregate":"count"},"label":{"channelType":"category","inferredType":"String","field":"productCategory","type":"nominal","isBinning":false,"allOthers":true}},"chartType":"Donut","convertedFields":[],"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#1392ab","#f0d175","#da6879","#8a27a5","#19C3E6","#116149","#E65D19","#8A27A5","#1392AB","#C10422","#73E0A1","#8CB6F2","#F0D175","#F075A8","#75DBF0","#70A092","#F09E75","#B97DC9","#71BECD","#DA6879"]},"dataValueLabels":{"enabled":false,"value":"value"}},"conditionalFormatting":[],"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Total"},"numberFormatting":{"enabled":true,"value":"Default"}},"label":{"labelOverride":{"enabled":true,"value":"Component"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"donut","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Tickets Closed by Product","embedding":{}},"item-10":{"calculatedFields":[],"channels":{"sort":{"channelType":"sort","inferredType":"Number","field":"sentimentScore","type":"quantitative","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"channelType":"any","inferredType":"String","field":"account","type":"nominal"},"display_series_0":{"channelType":"any","inferredType":"String","field":"assignee","type":"nominal"},"display_series_1":{"channelType":"any","inferredType":"Number","field":"sentimentScore","type":"nominal"}},"chartType":"Top Item","convertedFields":[],"customisations":{"options":{"labelSize":{"enabled":true,"value":"150"}},"conditionalFormatting":[],"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Account"}},"display_series_0":{"labelOverride":{"enabled":true,"value":"Assignee"}},"display_series_1":{"labelOverride":{"enabled":true,"value":"Sentiment Score"},"numberFormatting":{"enabled":true,"value":"Default"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"top-item","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":null,"queryId":null,"reductions":{},"sample":false,"title":"Happiest Support Case","embedding":{}},"item-11":{"calculatedFields":[],"channels":{"y":{"channelType":"aggregation","inferredType":"Number","field":"cumulativeAverage","type":"quantitative","aggregate":"mean"},"x":{"channelType":"category","inferredType":"Date","field":"date","type":"nominal","isBinning":true,"temporalBinning":["year","month","date"]}},"chartType":"Line","convertedFields":[{"fieldPath":"date","convertTo":"date","arrayParentPaths":[]}],"customisations":{"options":{"lineSmoothing":{"enabled":true,"value":"monotone"}},"conditionalFormatting":[],"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"vertical"}},"y":{}},"channels":{"y":{"labelOverride":{"enabled":true,"value":"Cumulative Average Score"},"numberFormatting":{"enabled":true,"value":"Default"}},"x":{"labelOverride":{"enabled":true,"value":"Date"},"dateTimeFormatting":{"enabled":true,"value":"DD-MMM-YYYY"}}}},"dashboardId":"dashboard-1","dataSourceId":"data-source-1","description":"","filters":[],"iconValue":"line-discrete","interactiveFiltering":"highlight","itemType":"chart","lookupFields":[],"meta":{},"missedFields":[],"query":"[\n  {\n    $sort: { dateClosed: 1 } // Sort by closing date\n  },\n  {\n    $group: {\n      _id: null,\n      dates: { $push: \"$dateClosed\" },\n      scores: { $push: \"$sentimentScore\" }\n    }\n  },\n  {\n    $unwind: {\n      path: \"$dates\",\n      includeArrayIndex: \"index\"\n    }\n  },\n  {\n    $project: {\n      date: \"$dates\",\n      cumulativeTotal: {\n        $sum: {\n          $slice: [\"$scores\", 0, { $add: [\"$index\", 1] }]\n        }\n      },\n      count: { $add: [\"$index\", 1] }\n    }\n  },\n  {\n    $project: {\n      _id: 0,\n      date: 1,\n      cumulativeAverage: {\n        $divide: [\"$cumulativeTotal\", \"$count\"]\n      }\n    }\n  }\n]","queryId":null,"reductions":{},"sample":false,"title":"Average Sentiment Over Time","embedding":{}}},"dataSources":{"data-source-1":{"alias":"tickets","collection":"tickets","database":"charts_data","deployment":"supportDB","sourceType":"cluster"}},"queries":{}}
